<<<<<<< HEAD
USE [project]
GO

/****** Object:  Table [dbo].[users]    Script Date: 5/30/2019 3:55:50 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[users](
	[uid] [nvarchar](10) NOT NULL,
	[uname] [nvarchar](50) NOT NULL,
	[phone] [nvarchar](50) NOT NULL,
	[email] [nvarchar](50) NOT NULL,
	[address] [nvarchar](100) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[uid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO


USE [project]
GO

/****** Object:  Table [dbo].[order]    Script Date: 5/30/2019 3:56:34 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO
USE [project]
GO

/****** Object:  Table [dbo].[login]    Script Date: 5/30/2019 3:57:01 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[login](
	[uid] [nvarchar](10) NOT NULL,
	[pwd] [nvarchar](50) NOT NULL,
	[role] [nvarchar](50) NOT NULL,
	[LLDATE] [datetime] NOT NULL
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[login] ADD  DEFAULT (getdate()) FOR [LLDATE]
GO

ALTER TABLE [dbo].[login]  WITH NOCHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO
USE [project]
GO

/****** Object:  Table [dbo].[category]    Script Date: 5/30/2019 3:57:31 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[category](
	[cat_id] [nvarchar](10) NOT NULL,
	[catname] [nvarchar](50) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[cat_id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
USE [project]
GO

/****** Object:  Table [dbo].[product]    Script Date: 5/30/2019 3:57:48 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[product](
	[cat_id] [nvarchar](10) NOT NULL,
	[pid] [nvarchar](10) NOT NULL,
=======
use Project
GO
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += '
DROP TABLE ' 
    + QUOTENAME(s.name)
    + '.' + QUOTENAME(t.name) + ';'
    FROM sys.tables AS t
    INNER JOIN sys.schemas AS s
    ON t.[schema_id] = s.[schema_id] 


PRINT @sql;
-- EXEC sp_executesql @sql;


use Project



CREATE TABLE [dbo].[users](
	[uid] [nvarchar](10) NOT NULL PRIMARY KEY,
	[uname] [nvarchar](50) NOT NULL,
	[phone] [nvarchar](50) NOT NULL,
	[email] [nvarchar](50) NOT NULL,
	[address] [nvarchar](100) NOT NULL,

)
CREATE TABLE [dbo].[login](
	[uid] [nvarchar](10) NOT NULL FOREIGN KEY  references users(uid),
	[pwd] [nvarchar](50) NOT NULL,
	[role] [nvarchar](50) NOT NULL,
	[LLDATE] [date] NOT NULL Default GETDATE()
) 

CREATE TABLE [dbo].[category](
	[cat_id] [nvarchar](10) NOT NULL Primary key,
	[catname] [nvarchar](50) NOT NULL,
 )

 CREATE TABLE [dbo].[product](
	[cat_id] [nvarchar](10) NOT NULL foreign key references category(cat_id),
	[pid] [nvarchar](10) NOT NULL primary key ,
>>>>>>> master
	[pname] [nvarchar](50) NOT NULL,
	[pdesc] [nvarchar](50) NOT NULL,
	[pimage] [nvarchar](20) NOT NULL,
	[price] [nvarchar](10) NOT NULL,
	[stock] [nvarchar](50) NOT NULL,
<<<<<<< HEAD
PRIMARY KEY CLUSTERED 
(
	[pid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[product]  WITH CHECK ADD FOREIGN KEY([cat_id])
REFERENCES [dbo].[category] ([cat_id])
GO
USE [project]
GO

/****** Object:  Table [dbo].[keywords]    Script Date: 5/30/2019 3:58:02 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[keywords](
	[kid] [nvarchar](10) NOT NULL,
	[keyword] [nvarchar](50) NOT NULL,
	[pid] [nvarchar](10) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[kid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[keywords] ADD  DEFAULT ('') FOR [keyword]
GO

ALTER TABLE [dbo].[keywords]  WITH CHECK ADD FOREIGN KEY([pid])
REFERENCES [dbo].[product] ([pid])
GO

USE [project]
GO

/****** Object:  Table [dbo].[cart]    Script Date: 5/30/2019 3:58:28 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[cart](
	[cartid] [nvarchar](10) NOT NULL,
	[pid] [nvarchar](10) NOT NULL,
	[uid] [nvarchar](10) NOT NULL,
	[quantity] [nvarchar](50) NOT NULL,
	[bill] [nvarchar](50) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[cartid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[cart]  WITH CHECK ADD FOREIGN KEY([pid])
REFERENCES [dbo].[product] ([pid])
GO

ALTER TABLE [dbo].[cart]  WITH CHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO
USE [project]
GO

/****** Object:  Table [dbo].[feedback]    Script Date: 5/30/2019 3:58:41 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[feedback](
	[f_id] [nvarchar](10) NOT NULL,
	[uid] [nvarchar](10) NULL,
	[description] [varchar](max) NOT NULL,
	[rating] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[f_id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO

ALTER TABLE [dbo].[feedback]  WITH CHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO

CREATE TABLE [dbo].[order](
	[oid] [nvarchar](10) NOT NULL,
	[pid] [nvarchar](10) NOT NULL,
	[uid] [nvarchar](10) NOT NULL,
	[odate] [date] NOT NULL,
	[paymode] [nvarchar](50) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[oid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[order] ADD  DEFAULT (getdate()) FOR [odate]
GO
USE [project]
GO

/****** Object:  Table [dbo].[payment]    Script Date: 5/30/2019 3:59:02 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[payment](
	[uid] [nvarchar](10) NULL,
	[payid] [nvarchar](10) NOT NULL,
	[transid] [nvarchar](max) NULL,
	[odate] [date] NOT NULL,
	[order_id] [nvarchar](50) NULL,
PRIMARY KEY CLUSTERED 
(
	[payid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO

ALTER TABLE [dbo].[payment] ADD  DEFAULT (getdate()) FOR [odate]
GO

ALTER TABLE [dbo].[payment]  WITH CHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO
USE [project]
GO

/****** Object:  Table [dbo].[wishlist]    Script Date: 5/30/2019 3:59:28 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[wishlist](
	[wishid] [nvarchar](10) NOT NULL,
	[pid] [nvarchar](10) NOT NULL,
	[uid] [nvarchar](10) NOT NULL,
	[ss] [nvarchar](50) NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[wishid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[wishlist]  WITH CHECK ADD FOREIGN KEY([pid])
REFERENCES [dbo].[product] ([pid])
GO

ALTER TABLE [dbo].[wishlist]  WITH CHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO

USE [project]
GO

/****** Object:  Table [dbo].[query]    Script Date: 5/30/2019 3:59:38 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[query](
	[uid] [nvarchar](10) NOT NULL,
	[query] [nvarchar](50) NOT NULL,
	[qid] [nvarchar](10) NOT NULL,
	[Response] [nvarchar](50) NULL,
	[qdate] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[qid] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[query] ADD  DEFAULT (getdate()) FOR [qdate]
GO

ALTER TABLE [dbo].[query]  WITH CHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO



ALTER TABLE [dbo].[order]  WITH CHECK ADD FOREIGN KEY([pid])
REFERENCES [dbo].[product] ([pid])
GO

ALTER TABLE [dbo].[order]  WITH CHECK ADD FOREIGN KEY([uid])
REFERENCES [dbo].[users] ([uid])
GO

=======
	
)

CREATE TABLE [dbo].[keywords](
	[kid] [nvarchar](10) NOT NULL primary key,
	[key] [nvarchar](50) NOT NULL default '*',
	[pid] [nvarchar](10) NOT NULL foreign key references product(pid),
)

CREATE TABLE [dbo].[cart](
	[cartid] [nvarchar](10) NOT NULL primary key,
	[pid] [nvarchar](10) NOT NULL foreign key references product(pid) ,
	[uid] [nvarchar](10) NOT NULL foreign key references users(uid),
	[quantity] [nvarchar](50) NOT NULL,
	[bill] [nvarchar](50) NOT NULL,
 )

CREATE TABLE [dbo].[order](
	[oid] [nvarchar](10) NOT NULL primary key,
	[pid] [nvarchar](10) NOT NULL foreign key references product(pid),
	[uid] [nvarchar](10) NOT NULL foreign key references users(uid),
	[odate] [date] NOT NULL default GETDATE(),
	[paymode] [nvarchar](50) NOT NULL,
)

CREATE TABLE [dbo].[payment](
	uid nvarchar(10) foreign key references users(uid),
	[payid] [nvarchar](10) primary key,
	transid nvarchar(MAX),
	[odate] [date] NOT NULL default GETDATE(),
	order_id nvarchar(50)
)

CREATE TABLE [dbo].[wishlist](
	[wishid] [nvarchar](10) NOT NULL primary key,
	[pid] [nvarchar](10) NOT NULL foreign key references [dbo].[product](pid),
	[uid] [nvarchar](10) NOT NULL foreign key references users(uid),
	[ss] [nvarchar](50) NOT NULL
) 

use project;



CREATE TABLE [dbo].[feedback](
	[f_id] [nvarchar](10) Primary key,
	[uid] [nvarchar](10)  foreign key references users(uid) ,
	[description] [varchar](max) NOT NULL,
	[rating] [int] NOT NULL
)



CREATE TABLE [dbo].[query](
	[uid] [nvarchar](10) foreign key references users(uid),
	[query] [nvarchar](50) NOT NULL,
	[qid] [nvarchar](10) NOT NULL,
	[Response] [nvarchar](50) NULL,
	[qdate] [datetime] default GETDATE(),
)
>>>>>>> master
